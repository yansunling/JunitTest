<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript" >
        window.onload = function() {

            // 抓取上传图片，转换代码结果，显示图片的dom

            var img_upload = document.getElementById("file");

            var base64_code = document.getElementById("base64_code");

            var img_area = document.getElementById("img_area");

            // 添加功能出发监听事件

            img_upload.addEventListener('change', readFile, false);

        }
        function readFile() {

            var file = this.files[0];//这里是抓取到上传的对象。

            if(!/image\/\w+/.test(file.type)) {

                alert("请确保文件为图像类型");

                return false;

            }
            var reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = function() {
                base64_code.innerHTML = this.result;
                //this.result里的这个result是FileReader.readAsDataURL()接口当中转换完图片输出的base64结果存放在result当中
                img_area.innerHTML = '<img src="' + this.result + '" alt=""/>';
            }
        }
    </script>
</head>
<body>
<div id="area_form">
    <form id="form_crmx_base_storefront_img" class="form">
        <table border='0' style="width: 280px;">
            <tr>
                <td align='right' width=40%>
                    <label for="file">附	件：</label>
                </td>
                <td width=70%>
                    <input type="file" id="file" name="file" accept="image/gif,image/jpeg,image/jpg,image/png" multiple="multiple" style='height:26px;width:200px'/>
                </td>
            </tr>
            <tr>
                <td><label for="file">base64：</label></td>
                <td>
                    <div id="base64_code"></div>
                </td>
            </tr>
            <tr>
                <td><label for="file">图片：</label></td>
                <td> <div id="img_area"></div></td>
            </tr>
        </table>
    </form>
    <div id="icon"></div>
</div>

</body>
</html>